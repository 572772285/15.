<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>滚动顶部导航</title>
	<style>
		*{
			margin: 0;
			padding: 0;
		}
		#nav,#nav1{
			width: 100%;
			height: 100px;
			text-align: center;
			line-height: 100px;
			font-size: 38px;			
		}
		#nav{
			background-color: red;

		}
		#nav1{
			background-color: pink;
			height: 0;
			position: fixed;
			top: 0;
		}
		#section{
			width: 100%;
			height: 3000px;
			background-color: yellow;
		}
	</style>
	<script>
		var timer=null;
		function animation(obj,attr,value,isLinear){
			var isPeed=0;
			var isStop=false;
			clearInterval(obj.timer);
			obj.timer=setInterval(function(){
					var curr=parseFloat(getComputedStyle(obj,false)[attr]);					
					if(attr=='opacity'){
						curr=Math.round(curr*100)
						/*四舍五入*/
					}
					if(isLinear){
						if(curr<value){
							isPeed=10;
						}else{
							isPeed=-10;
						}
						if(Math.abs(value-curr)<Math.abs(isPeed)){
							isStop=true;
						}
					}else{
						isPeed=(value-curr)/10;
						isPeed=isPeed>0?Math.ceil(isPeed):Math.floor(isPeed);
						if(!isPeed){
							isStop=true;
						}
					}
					/*向上取整和向下取整*/
					if(isStop){
						clearInterval(obj.timer);
						if(isLinear){
							if(attr=='opacity'){
								obj.style[attr]=value/100;
							}else{
								obj.style[attr]=value+'px';
							}
						}
					}else{
						if(attr=='opacity'){
							obj.style[attr]=(curr+isPeed)/100;
						}else{
							obj.style[attr]=curr+isPeed+'px'
						}
						console.log(isPeed)
					}
				},30)
		}
			var isShow=false;
		window.onscroll=function(){
			var oNav=document.getElementById('nav');
			var oNav1=document.getElementById('nav1');
			var oSe=document.getElementById('section');
			var iTop=document.body.scrollTop||document.documentElement.scrollTop;
			var iHeight=window.innerHeight;
			var iTarget=iTop;
				if(iTop>=100){
					if(!isShow){
						animation(oNav1,'height',100);
						isShow=true;
						console.log(2)
					}
				}else{
					if(isShow){
						animation(oNav1,'height',0);
						isShow=false;
					}
					console.log(1)
				}
			}
	</script>
</head>
<body>
	<div id="nav">导航1</div>
	<div id="nav1">导航1</div>
	<div id="section">2454532132dsasadasdasdsad<br>asda5s4d4a4s65d4a54</div>
</body>
</html>